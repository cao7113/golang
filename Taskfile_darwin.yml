# https://taskfile.dev
version: '3'

tasks:

  install:
    cmds:
      - brew install hello-golang
  
  install-cilint:
    name: install cilint by https://github.com/golangci/golangci-lint#macos
    cmds:
      - brew install golangci/tap/golangci-lint
      - brew upgrade golangci/tap/golangci-lint

  install-grpcurl:
    desc: install grpcurl
    cmds:
      - brew install grpcurl

  install-direnv:
    desc: install .envrc manager
    cmds:
      - brew install direnv
      - echo hook your shell as https://direnv.net/docs/hook.html

  install-db-mig:
    desc: install migrations
    cmds:
      - which migrate || brew install golang-migrate
      - migrate -version

  # gRPC
  install-bloomrpc:
    desc: install GUI client for gRPC
    cmds:
      - brew install bloomrpc

  install-grpc:
    cmds:
      # protoc, pb compiler and plugins
      - brew install protobuf
      - brew install protoc-gen-go
      - which protoc protoc-gen-go
      # - brew install prototool